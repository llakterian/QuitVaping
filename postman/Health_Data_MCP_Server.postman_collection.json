{
  "info": {
    "name": "Health Data MCP Server",
    "description": "Postman collection for testing Health Data MCP Server endpoints and health API integrations",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{MEDICAL_DB_API_KEY}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "mcp_server_url",
      "value": "ws://localhost:8080/mcp",
      "type": "string"
    },
    {
      "key": "health_api_base_url",
      "value": "https://api.health.gov",
      "type": "string"
    },
    {
      "key": "test_user_id",
      "value": "user_12345",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Recovery Timeline",
      "item": [
        {
          "name": "Get Health Recovery Timeline",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"{{$randomUUID}}\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"get_health_recovery_timeline\",\n    \"arguments\": {\n      \"user_id\": \"{{test_user_id}}\",\n      \"personalize\": true\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{mcp_server_url}}",
              "host": ["{{mcp_server_url}}"]
            },
            "description": "Get personalized health recovery timeline for a user"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"test-123\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"get_health_recovery_timeline\",\n    \"arguments\": {\n      \"user_id\": \"user_12345\",\n      \"personalize\": true\n    }\n  }\n}"
                },
                "url": {
                  "raw": "{{mcp_server_url}}",
                  "host": ["{{mcp_server_url}}"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"test-123\",\n  \"result\": {\n    \"content\": [\n      {\n        \"type\": \"text\",\n        \"text\": \"Health Recovery Timeline Generated Successfully\"\n      }\n    ],\n    \"isError\": false\n  }\n}"
            }
          ]
        },
        {
          "name": "Get Current Cessation Benefits",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"{{$randomUUID}}\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"get_cessation_benefits\",\n    \"arguments\": {\n      \"user_id\": \"{{test_user_id}}\",\n      \"time_period\": \"current\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{mcp_server_url}}",
              "host": ["{{mcp_server_url}}"]
            },
            "description": "Get current health benefits based on quit duration"
          }
        }
      ],
      "description": "Endpoints for health recovery timeline and cessation benefits"
    },
    {
      "name": "NRT Management",
      "item": [
        {
          "name": "Get NRT Protocols",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"{{$randomUUID}}\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"get_nrt_protocols\",\n    \"arguments\": {\n      \"user_id\": \"{{test_user_id}}\",\n      \"current_stage\": \"initial\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{mcp_server_url}}",
              "host": ["{{mcp_server_url}}"]
            },
            "description": "Get evidence-based NRT protocols and recommendations"
          }
        }
      ],
      "description": "Endpoints for NRT (Nicotine Replacement Therapy) management"
    },
    {
      "name": "Personalized Insights",
      "item": [
        {
          "name": "Get Personalized Health Insights",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"{{$randomUUID}}\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"get_personalized_insights\",\n    \"arguments\": {\n      \"user_id\": \"{{test_user_id}}\",\n      \"insight_type\": \"comprehensive\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{mcp_server_url}}",
              "host": ["{{mcp_server_url}}"]
            },
            "description": "Get comprehensive personalized health insights"
          }
        }
      ],
      "description": "Endpoints for personalized health insights and analytics"
    },
    {
      "name": "External Health APIs",
      "item": [
        {
          "name": "CDC Health Data API",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "https://data.cdc.gov/api/views/hc4f-j6nb/rows.json?$limit=10&$where=topic='Cessation'",
              "protocol": "https",
              "host": ["data.cdc.gov"],
              "path": ["api", "views", "hc4f-j6nb", "rows.json"],
              "query": [
                {
                  "key": "$limit",
                  "value": "10"
                },
                {
                  "key": "$where",
                  "value": "topic='Cessation'"
                }
              ]
            },
            "description": "Fetch smoking cessation data from CDC API"
          }
        },
        {
          "name": "NIH Health Information API",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "https://clinicaltrials.gov/api/query/study_fields?expr=smoking+cessation&fields=NCTId,BriefTitle,OverallStatus&min_rnk=1&max_rnk=5&fmt=json",
              "protocol": "https",
              "host": ["clinicaltrials.gov"],
              "path": ["api", "query", "study_fields"],
              "query": [
                {
                  "key": "expr",
                  "value": "smoking+cessation"
                },
                {
                  "key": "fields",
                  "value": "NCTId,BriefTitle,OverallStatus"
                },
                {
                  "key": "min_rnk",
                  "value": "1"
                },
                {
                  "key": "max_rnk",
                  "value": "5"
                },
                {
                  "key": "fmt",
                  "value": "json"
                }
              ]
            },
            "description": "Fetch clinical trial data related to smoking cessation"
          }
        },
        {
          "name": "WHO Health Statistics API",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "https://ghoapi.azureedge.net/api/TOBACCO_0000000029",
              "protocol": "https",
              "host": ["ghoapi.azureedge.net"],
              "path": ["api", "TOBACCO_0000000029"]
            },
            "description": "Fetch tobacco use statistics from WHO Global Health Observatory"
          }
        }
      ],
      "description": "Integration with external health APIs from public sources"
    },
    {
      "name": "Health Calculations",
      "item": [
        {
          "name": "Calculate Health Improvements",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{test_user_id}}\",\n  \"quit_date\": \"2024-01-01T00:00:00Z\",\n  \"vaping_history\": {\n    \"duration_months\": 24,\n    \"daily_usage\": \"medium\",\n    \"nicotine_strength\": \"6mg\"\n  },\n  \"user_profile\": {\n    \"age\": 28,\n    \"fitness_level\": \"good\",\n    \"health_conditions\": []\n  }\n}"
            },
            "url": {
              "raw": "{{mcp_server_url}}/calculate-improvements",
              "host": ["{{mcp_server_url}}"],
              "path": ["calculate-improvements"]
            },
            "description": "Calculate personalized health improvements based on user profile"
          }
        }
      ],
      "description": "Health calculation utilities and algorithms"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set dynamic variables for testing",
          "pm.globals.set('timestamp', new Date().toISOString());",
          "pm.globals.set('request_id', pm.variables.replaceIn('{{$randomUUID}}'));"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Common test assertions for all requests",
          "pm.test('Response status code is 200', function () {",
          "    pm.response.to.have.status(200);",
          "});",
          "",
          "pm.test('Response has valid JSON structure', function () {",
          "    pm.response.to.be.json;",
          "});",
          "",
          "pm.test('Response time is less than 5000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "// Store response data for use in subsequent requests",
          "if (pm.response.code === 200) {",
          "    const responseJson = pm.response.json();",
          "    if (responseJson.result) {",
          "        pm.globals.set('last_response', JSON.stringify(responseJson.result));",
          "    }",
          "}"
        ]
      }
    }
  ]
}